Version 4
SHEET 1 1412 972
WIRE 592 80 576 80
WIRE 704 80 672 80
WIRE 736 80 704 80
WIRE 832 80 800 80
WIRE 880 80 832 80
WIRE 496 160 272 160
WIRE 592 160 496 160
WIRE 1040 160 816 160
WIRE 1136 160 1040 160
WIRE 336 208 320 208
WIRE 880 208 864 208
WIRE 272 224 272 160
WIRE 272 224 176 224
WIRE 288 224 272 224
WIRE 816 224 816 160
WIRE 816 224 720 224
WIRE 832 224 816 224
WIRE 176 240 176 224
WIRE 416 240 352 240
WIRE 496 240 416 240
WIRE 720 240 720 224
WIRE 960 240 896 240
WIRE 1040 240 960 240
WIRE 288 256 272 256
WIRE 832 256 816 256
WIRE 336 272 320 272
WIRE 880 272 864 272
WIRE 272 288 272 256
WIRE 416 288 416 240
WIRE 464 288 416 288
WIRE 816 288 816 256
WIRE 960 288 960 240
WIRE 1008 288 960 288
WIRE 336 304 320 304
WIRE 880 304 864 304
WIRE 272 320 272 288
WIRE 288 320 272 320
WIRE 816 320 816 288
WIRE 832 320 816 320
WIRE 432 336 352 336
WIRE 592 336 592 240
WIRE 592 336 432 336
WIRE 976 336 896 336
WIRE 1136 336 1136 240
WIRE 1136 336 976 336
WIRE 176 352 176 320
WIRE 288 352 272 352
WIRE 720 352 720 320
WIRE 832 352 816 352
WIRE 336 368 320 368
WIRE 880 368 864 368
WIRE 272 416 272 352
WIRE 432 416 272 416
WIRE 496 416 432 416
WIRE 592 416 576 416
WIRE 816 416 816 352
WIRE 976 416 816 416
WIRE 1040 416 976 416
WIRE 1136 416 1120 416
WIRE 720 720 672 720
WIRE 816 720 800 720
WIRE 848 720 816 720
WIRE 944 720 928 720
WIRE 992 720 944 720
WIRE 944 752 944 720
WIRE 672 768 672 720
WIRE 816 768 816 720
WIRE 816 848 816 832
WIRE 816 848 672 848
WIRE 944 848 944 832
WIRE 944 848 816 848
WIRE 992 848 944 848
WIRE 816 864 816 848
FLAG 704 80 Vop+
FLAG 576 80 Vop+2
FLAG 336 368 Vop+2
FLAG 336 304 Vop-
FLAG 336 208 Vop+2
FLAG 336 272 Vop-
FLAG 272 288 Vd+
FLAG 464 288 Vo1
FLAG 176 352 Vd-
FLAG 992 848 Vd-
FLAG 816 864 0
FLAG 992 720 Vd+
FLAG 832 80 Vop-
FLAG 880 80 0
FLAG 592 416 0
FLAG 880 368 Vop+2
FLAG 880 304 Vop-
FLAG 880 208 Vop+2
FLAG 880 272 Vop-
FLAG 816 288 Vo1
FLAG 1008 288 Vo2
FLAG 720 352 Vd-
FLAG 1136 416 0
SYMBOL Opamps\\opamp2 320 400 M180
WINDOW 3 10 -1 Left 2
WINDOW 0 -28 2 Left 2
SYMATTR Value LM324
SYMATTR InstName U1
SYMBOL res 688 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL Opamps\\opamp2 320 176 R0
WINDOW 3 10 -1 Left 2
WINDOW 0 -28 2 Left 2
SYMATTR Value LM324
SYMATTR InstName U2
SYMBOL res 512 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value {r4}
SYMBOL res 592 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {r1}
SYMBOL res 608 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value {r3}
SYMBOL res 160 224 R0
SYMATTR InstName R6
SYMATTR Value {rg}
SYMBOL cap 800 768 R0
SYMATTR InstName C1
SYMATTR Value 0.1u
SYMBOL voltage 672 752 R0
WINDOW 3 328 158 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 0.1m 0 0 {d*Tp} {Tp})
SYMATTR InstName V2
SYMBOL res 816 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 944 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 960 848 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 200
SYMBOL Misc\\cell 736 80 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 -32 32 VBottom 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 416 320 R0
SYMATTR InstName R3
SYMATTR Value {r2}
SYMBOL Opamps\\opamp2 864 400 M180
WINDOW 3 10 -1 Left 2
WINDOW 0 -28 2 Left 2
SYMATTR Value LM324
SYMATTR InstName U3
SYMBOL Opamps\\opamp2 864 176 R0
WINDOW 3 10 -1 Left 2
WINDOW 0 -28 2 Left 2
SYMATTR Value LM324
SYMATTR InstName U4
SYMBOL res 1056 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value {r4}
SYMBOL res 1136 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {r1}
SYMBOL res 1152 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value {r3}
SYMBOL res 704 224 R0
SYMATTR InstName R10
SYMATTR Value {rg}
SYMBOL res 960 320 R0
SYMATTR InstName R11
SYMATTR Value {r2}
TEXT 344 520 Left 2 !.param rg=15k, r1=68k, r2=1k, r3={r2}, r4={r1}
TEXT 904 560 Left 2 !.tran 2m
TEXT 216 560 Left 2 !.inc "C:\\Program Files (x86)\\LTC\\LTspiceIV\\lib\\LM324.lib"
TEXT 168 616 Left 2 !.param presc=256, pwm_v=200, Tp={presc/8meg}, d={pwm_v/presc}
