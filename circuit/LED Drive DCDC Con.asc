Version 4
SHEET 1 2616 680
WIRE 576 -336 512 -336
WIRE 704 -336 656 -336
WIRE 240 -288 -64 -288
WIRE 512 -288 512 -336
WIRE 512 -288 240 -288
WIRE -64 -272 -64 -288
WIRE 240 -272 240 -288
WIRE 512 -272 512 -288
WIRE 816 -272 784 -272
WIRE 784 -256 784 -272
WIRE -176 -224 -256 -224
WIRE 192 -224 176 -224
WIRE 464 -224 448 -224
WIRE 720 -208 704 -208
WIRE 768 -208 720 -208
WIRE 880 -208 864 -208
WIRE 912 -208 880 -208
WIRE -32 -192 -64 -192
WIRE -32 -160 -32 -192
WIRE 96 -160 96 -224
WIRE 96 -160 -32 -160
WIRE 240 -160 240 -176
WIRE 368 -160 368 -224
WIRE 368 -160 240 -160
WIRE 512 -160 512 -176
WIRE 560 -160 512 -160
WIRE 240 -144 240 -160
WIRE 512 -144 512 -160
WIRE -256 -112 -256 -224
WIRE -176 -112 -176 -224
WIRE 96 -96 96 -160
WIRE 192 -96 176 -96
WIRE 368 -96 368 -160
WIRE 464 -96 448 -96
WIRE 720 -80 720 -208
WIRE 784 -80 720 -80
WIRE 880 -80 880 -208
WIRE 880 -80 848 -80
WIRE -32 -32 -32 -64
WIRE 240 -32 240 -48
WIRE 512 -32 512 -48
WIRE -256 -16 -256 -32
WIRE 848 64 816 64
WIRE -32 112 -240 112
WIRE 16 112 -32 112
WIRE 64 112 16 112
WIRE 96 112 64 112
WIRE 320 112 208 112
WIRE 352 112 320 112
WIRE 464 112 432 112
WIRE 528 112 464 112
WIRE 640 112 608 112
WIRE 736 112 720 112
WIRE 848 112 848 64
WIRE -240 128 -240 112
WIRE 736 160 736 112
WIRE 16 176 16 112
WIRE 64 176 64 112
WIRE 320 176 320 112
WIRE 464 176 464 112
WIRE 848 208 848 176
WIRE -240 224 -240 208
WIRE -16 304 -32 304
WIRE 16 304 16 240
WIRE 16 304 -16 304
WIRE 64 304 64 240
WIRE 64 304 16 304
WIRE 320 304 320 240
WIRE 320 304 64 304
WIRE 464 304 464 240
WIRE 464 304 320 304
WIRE 736 304 736 240
WIRE 736 304 464 304
WIRE 848 304 848 272
WIRE 848 304 816 304
WIRE -240 336 -240 304
WIRE -16 336 -16 304
FLAG -16 336 0
FLAG 640 112 V+
FLAG 720 112 V-
FLAG 816 64 V+
FLAG 816 304 V-
FLAG 736 304 Vd-
FLAG 736 112 Vd+
FLAG -32 112 Vop+
FLAG -32 304 Vop-
FLAG 816 -272 Vmos
FLAG 208 112 SW-
FLAG 704 -208 SW+
FLAG 912 -208 SW-
FLAG 96 112 SW+
FLAG 560 -160 Vmos
FLAG -256 -16 0
FLAG 512 -32 0
FLAG -32 -32 0
FLAG 240 -32 0
FLAG 704 -336 Vop+
FLAG -240 336 0
SYMBOL diode 336 240 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -29 -33 Left 2
SYMATTR InstName D2
SYMATTR Value 11EQS06
SYMBOL polcap 48 176 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 470u
SYMATTR InstName C2
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=16 Rser=160m
SYMBOL polcap 448 176 R0
SYMATTR InstName C3
SYMATTR Value 100u
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=16 Rser=160m
SYMBOL ind 448 96 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 44 61 VTop 2
SYMATTR InstName L1
SYMATTR Value 22u
SYMATTR SpiceLine Ipk=2.9 Rser=73m
SYMBOL res 752 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 0.25
SYMBOL pmos 864 -256 R90
WINDOW 0 107 31 VRight 2
WINDOW 3 72 -5 VRight 2
SYMATTR InstName M1
SYMATTR Value Si9434BDY
SYMBOL cap 32 240 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value 0.1u
SYMBOL diode 848 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 11EQS06
SYMBOL voltage -256 -128 R0
WINDOW 3 328 158 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 10u 0 0 {d*Tp} {Tp})
SYMATTR InstName V2
SYMBOL npn 448 -144 R0
SYMATTR InstName Q1
SYMATTR Value 2SC1815GR
SYMBOL pnp 448 -176 M180
WINDOW 0 56 38 Left 2
WINDOW 3 56 68 Left 2
SYMATTR InstName Q2
SYMATTR Value 2SA1015GR
SYMBOL res 464 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 4.7k
SYMATTR SpiceLine tol=5
SYMBOL res 464 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 4.7k
SYMATTR SpiceLine tol=5
SYMBOL npn -96 -160 R0
SYMATTR InstName Q3
SYMATTR Value 2SC1815GR
SYMBOL res -80 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res -80 -288 R0
SYMATTR InstName R16
SYMATTR Value 4.7k
SYMATTR SpiceLine tol=5
SYMBOL npn 176 -144 R0
SYMATTR InstName Q4
SYMATTR Value 2SC1815GR
SYMBOL pnp 176 -176 M180
WINDOW 0 56 38 Left 2
WINDOW 3 56 68 Left 2
SYMATTR InstName Q5
SYMATTR Value 2SA1015GR
SYMBOL res 192 -240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 100k
SYMATTR SpiceLine tol=5
SYMBOL res 192 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 100k
SYMATTR SpiceLine tol=5
SYMBOL res 672 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 0.1
SYMBOL LED 832 208 R0
SYMATTR InstName D5
SYMATTR Value W5AP-LZMZ-5K8L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL LED 832 112 R0
SYMATTR InstName D1
SYMATTR Value W5AP-LZMZ-5K8L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind 624 96 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 44 61 VTop 2
SYMATTR InstName L2
SYMATTR Value 22u
SYMATTR SpiceLine Ipk=2.9 Rser=73m
SYMBOL Misc\\battery -240 208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 7.8
SYMBOL res -256 112 R0
SYMATTR InstName R2
SYMATTR Value 160m
TEXT 88 376 Left 2 !.tran 1m
TEXT -8 416 Left 2 !.include lib/LM324.lib
TEXT -208 -360 Left 2 !.param presc=64, pwm_v=42, Tp={presc/8meg}, d={pwm_v/presc}
